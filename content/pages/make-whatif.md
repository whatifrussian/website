Title: Общие положения по оформлению и переводу Что если?
Slug: make-whatif
Category: Прочее
Date: 2014-06-20 08:00
Source: False
Formulas: False
save_as: make-whatif/index.html
url: make-whatif/

Этот документ призван облегчить процесс перевода текстов проекта what-if.xkcd.com и размещения переводов на сайте chtoes.li.

## Основные принципы перевода

1. Мы публикуем перевод текста строго до 23:59 (МСК) четверга.
2. Картинки переводятся по возможности к этому времени. Хоть это и не критично, но неприятно.
3. Мы не просто делаем машинный перевод текста, мы переводим, оформляем текст так, чтобы его было приятно читать, конвертируем единицы измерения, приводим оформление к привычному у нас виду, делаем поясняющие сноски (например указываем дополнительные ссылки для изучения или поясняем некоторые специфические моменты, вроде игры слов).
4. Мы очень внимательно относимся к тому, как именно написан текст. Мы стараемся не допускать пунктуационных, орфографических и смысловых ошибок. Но мы — обычные люди, а у людей бывают ошибки.

## Порядок создания и публикации перевода

Пункты 2-5 обычно выполняет **librarian**

1. Во вторник наступает готовность номер один, в любое время суток, Рэндал Монро, ~без объявления войны~ публикует новую запись.
2. Запись нужно сконвертировать из html в markdown. Для конвертирования нужно установить утилиту **html2markdown**, взять содержимое оригинала страницы между тегами article, сохранить его в файл вида 029-spent-fuel-pool.html (029 - номер записи на сайте whatif, spent-fuel-pool - заголовок записи в нижнем регистре, пробелы заменены на `-`) и сконвертировать командой: html2markdown -b0 029-spent-fuel-pool.html > 029-spent-fuel-pool.md . В вопросе нужно чтобы перед указанием автора была пустая строка с `>` в начале.
3. В полученном файле нужно удалить текст с заголовком, и расставить вопросы, изменить url картинок на uploads/029-spent-fuel-pool. Например: /imgs/a/51/freefall_candy.png -> /uploads/051-free-fall/freefall_candy_ru.png
4. Текст на картинках оформляется так, как описано в следующем разделе.
5. Идём на notabenoid.com и создаём новый перевод, тип **Закрытый**. В переводе создаём новую главу, в неё импортируем содержимое 029-spent-fuel-pool.md, тип переносов строк: Два переноса.
6. Согласно договорённостям осуществляется перевод и корректура текста.
7. Модераторы выбирают наиболее удачные варианты перевода, компилируя из нескольких вариантов один, наиболее удачный, осуществляется финальная корректура текста. В комментариях обычно указываются сноски и аббревиатуры, их также нужно будет включить в финальный вариант перевода.
8. Жмём скачать и идём в админку сайта создавать запись:
    1. Заголовок
    2. Текст записи
    3. URL записи spent-fuel-pool
    4. Описание страницы (description): копируем текст вопроса
    5. Ключевые слова страницы (keywords): должны характеризовать текст записи
    6. В разделе Менеджер файлов создаём директорию 029-spent-fuel-pool, куда загружаются изображения: оригиналы и переведённые (переведённые должны иметь название заканчивающееся на `*_ru`)
9. Запись сначала публикуется как черновик и нужно проверить на то, что картинки отображаются корректно и если отображаются оригинальные, при том, что загружены русифицированые, то нужно скорректировать имена файлов картинок (добавить `*_ru`).
10. После того, как запись проверена и опубликована нужно всем рассказать про неё: [vk](http://vk.com/whatifrussian), [twitter](http://twitter.com/whatifrussian).

## Оформление текста с изображений

Сейчас мы не пишем транскрипции, поскольку поиск по ним всё равно не осуществляется. Для перевода просто помещаем надписи с картинки в [labels][/labels]. Выглядит это так:

```
![ It's the ciiiiiiircle of deaaaaaath ♫](/uploads/101-plastic-dinosaurs/cycle.png)
[labels]
Sunlight
CO<sub>2</sub>
Water
Photosynthesis
Food chain
Oil
Oil rigs
Water vapor
Cars
Speed
CO<sub>2</sub>
[/labels]
```

Далее, до конца этого раздела, прежний порядок оформления. Так оформлялись транскрипции:


```
a. [Описание сцены.]
b. Персонаж: Речь.
c. *звук* или Персонаж: *звук*.
d. Надпись: Текст надписи.
```

Весь текст оборачивается в [transcription]...[/transcription]. Выглядит всё это так:

```
![Я думал, я ожидал… не знаю чего. Но нет, всё прошло гладко.](/uploads/057-dropping-a-mountain/mountain_surf_ru.png)
[transcription]
[Человек с прибором и Девушка возле разлома в горе. Девушка осматривает разлом.]
Человек с прибором: Хорошо, наш прибор поднял гору, и...
Человек с прибором: Не засовывай туда руки!
Девушка: Почему?
[/transcription]
```

Описание сцены должно быть по возможности кратким. Имена персонажей (например, Девушка, Человек в Шляпе, Человек) везде пишутся с заглавной буквы.

## Хороший тон при переводе или правила перевода

1. **It.** За перевод слова "it" в начале предложения как «это» убивают сразу. Это следует из того, что, как можно было заметить, в русском языке крайне мало предложений начинаются со слова «это». Это признак плохого перевода.
2. **Одушевление.** Старайтесь не использовать слов, означающих неодушевленные предметы, с глаголами в активном залоге, обозначающими действия, выполняемые объектами одушевленными. Блог не может рассказать (рассказать можно в блоге). Статья не может доказывать (доказывать можно в статье). Однако самолет вполне может летать, а рыба — плавать.
3. **Строение предложений: примеры.** Два предыдущих пункта показывают, как не нужно строить предложения: они перегружены оборотами и довольно тяжело вопринимаются. И, я даже не знаю, шутил ли автор, вставив слово «это» столько раз.
4. **Обращения и не только.** Следует по возможности избегать обращений к читателю, если предложение не побуждает его к действию. Подробнее про это и про другие нюансы переводов с английского: [rgo:Руководство по переводу](http://www.rugentoo.org/technology/translators-howto.html).
5. **Буква «ё».** Мы пишем букву «ё» там, где её написание факультативно.
6. **Типографика.** Следите за пунктуацией и типографикой. Если используете Windows, скачайте раскладку Ильи Бирмана ([ib:Типографская раскладка](http://ilyabirman.ru/projects/typography-layout/)) и научитесь пользоваться ей; если используете Linux, научитесь пользоваться XCompose (инструкция для Ubuntu Linux: [sm:Типографская раскладка клавиатуры в Ubuntu](http://softwaremaniacs.org/blog/2010/10/29/ubuntu-typography-keyboard/)).
7. **Сокращения.** Сокращённые слова в принятых сокращениях («т. к.», «т. е.», «и т. д.», «и т. п.» и других подобных) и именах (например, «Д. Э. Розенталь») не «слипаются», т. е. пробел между ними пишется. (*Вообще говоря, это должен быть один из неразрывных пробелов, но такие тонкости типографики мы в выпусках не учитываем. Всё-таки не книгу верстаем.*) Подробнее: [g:Как правильно сокращать слова?](http://www.gramota.ru/spravka/letters/?rub=rubric_100).
8. **Многоточие** — это один символ («…»), а не три точки («...»).
9. **Кавычки.** Вокруг английского текста кавычки ставятся в соответствии с английскими нормами: "something" (да, именно в переводе). Обратите внимание: эти кавычки отличаются от применяемых в программировании (“Hello, world!”). Вокруг русского — в соответствии с русскими: «что-то». В качестве кавычек второго уровня в русском языке используются кавычки-лапки: «что-то с „чем-то“». Подробнее: [w:Кавычки](http://ru.wikipedia.org/wiki/Кавычки).
10. **Тире.** В диапазонах ставится не дефис, а тире. В числовых диапазонах (записанных цифрами) — среднее тире (короткое тире, en dash) без отбивки пробелами. Во всех остальных случаях используется длинное тире (em dash). Подробнее см. [w:Тире](http://ru.wikipedia.org/wiki/Тире) и [w:Знаки_диапазона](http://ru.wikipedia.org/wiki/Знаки_диапазона). (*Также см. перевод книги Роберта Брингхерста «Основы стиля в типографике» (обратите внимание на сноски 14 и 94).*)
11. **Числовые разделители.** В русском языке в качестве десятичного разделителя используется запятая, а разделитель между разрядами — тонкий пробел («&thinsp;» в мнемонике HTML). Запятые между разрядами и точки между целой и дробной частью недопустимы в переводе.
12. **Фамилии.** При транслитерации фамилий старайтесь пользоваться правилом «родной фамилии». Согласно нему, *Mark Zuckerberg* транслитерируется как *Марк Цукерберг*, а не *Закеберг*, потому что это еврейская фамилия. Английские фамилии транслитерируются с английского языка, французские — с французского.
13. **Строение предложений** в русском языке отличается от английского, и — так как мы переводим для русскоязычного читателя — русский язык для нас первичен. При невозможности 100% точного перевода (а такое случается раз через раз) приоритет отдается не точности, а русскому языку. Но если вы понимаете, что невозможность 100% точности — это недостаток вашего умения, то переводите точно — стилистику потом поправят. В этом случае полезно будет указать моменты, вызвавшие затруднения. Так меньше шансов, что неудачный вариант перевода будет пропущен при вычитке.
14. **Сноски и списки.** Сами сноски оформляются в соответствии с [ww:Сноски#Рекомендации по стилю](http://ru.wikipedia.org/wiki/Википедия:Сноски#.D0.A0.D0.B5.D0.BA.D0.BE.D0.BC.D0.B5.D0.BD.D0.B4.D0.B0.D1.86.D0.B8.D0.B8_.D0.BF.D0.BE_.D1.81.D1.82.D0.B8.D0.BB.D1.8E). Обратите внимание: знак сноски не ставится после точки и после запятой. Про оформление списков можно почитать [dp:Правила оформления перечней](http://delo-press.ru/articles.php?n=5276) и [ww:Списки внутри статьи](http://ru.wikipedia.org/wiki/Википедия:Списки_внутри_статьи). Обратите внимание: сноски в конце статьи являются самостоятельными предложениями, должны начинаться с заглавной буквы, и в конце каждого должна ставиться точка.
15. **Примечания переводчика** выглядят так: `[^n]: Тыц-тыц. Та-дам. — _Прим. пер._`. Подробнее: [azpc:Справочная книга редактора и корректора/Примечания](http://www.az-print.com/FAQ/HelpBook/h027.shtml).
16. **Подписи к картинкам** считаем самостоятельными предложениями — начинаем с заглавной буквы, заканчиваем точкой (либо другим, соответствующим по смыслу знаком).
17. **Вопрос выпуска. **Точка после имени задавшего вопрос не ставится. Здесь мы руководствуемся правилами для оформления эпиграфов. Подробнее: [g:Вопрос № 255035](http://www.gramota.ru/spravka/buro/29_376071).
18. **Две подряд идущие сноски** разделяются тонким пробелом («что-то[^1]&thinsp;[^2]»). (*Этого правила мы придерживаемся в выпусках, поскольку так оформленные сноски выглядят лучше, но что рекомендует на этот счёт литература, я (Totktonada) не смотрел.*)
19. **Ссылки на статьи** нужно оформлять в соответствии с русскими, а не иностранными традициями. Хоть выпуск и не научная работа, но основных правил оформления списков литературы нужно придерживаться. Т. е. "Author: Article Name, The Journal. Addition information" или “The Journal. Author: Article Name. Addition information” станет «Автор. Название статьи // Журнал. — Дополнительная информация». Подробнее: [g:Как оформить библиографическую ссылку и составить библиографию?](http://www.gramota.ru/spravka/letters/?rub=rubric_78).
20. **Наименования.** Если имя собственное — наименование состоит из нескольких слов, то с прописной буквы пишется только первое слово (за исключением случаев, когда в состав наименования входят другие собственные имена). Из этого правила есть исключения, например, названия ныне существующих стран. Так, в предыдущем пункте "Article Name" было переведено как «Название статьи». Подробнее см. [g:Прописные буквы](http://www.gramota.ru/spravka/rules/?rub=prop) и [ds:Названия](http://diamondsteel.ru/useful/handbook/3.html).
21. **Источники знаний.** Многое из перечисленного есть в «Справочнике по правописанию и литературной праке» Д. Э. Розенталя, 5 изд. Если вы хотите писать грамотно, то полезно иметь его под рукой. И, разумеется, стоит научиться пользоваться [порталом gramota.ru](http://gramota.ru). У них не слишком хороший поиск по вопросам и, кажется, нет поиска по существующим разделам справки. Изучите навигацию по сайту, посмотрите, какие вопросы освещаются в каждом из разделов справки.
22. **Не стесняйтесь** задавать вопросы и реагируйте на критику.

## Часто используемая функциональность Markdown

Основная документация на эту тему [http://daringfireball.net/projects/markdown/](http://daringfireball.net/projects/markdown//). Здесь собраны наиболее частоиспользуемые варианты оформления:

* Оформление текста: `*курсив*`, `**жирный**`
* Оформление ссылок: `[текст ссылки](http://example.com)` - ссылки с русскими символами лучше именно с этими ссылками и вставлять, например `http://ru.wikipedia.org/wiki/Я`, а не `http://ru.wikipedia.org/wiki/%D0%AF`. Если ссылка на запись на сайте, то она должна выглядеть так: /page/pennies
* Оформление изображений: `![](http://example.com/image.png) "alt-текст изображения"`) - локальная ссылка на картинку обычно выглядит так: /uploads/id-slug/original_name.png. Про то, как загружать изображения будет позже
* Аббревиатуры (тег abbr) оформляются так (расшифровка даётся в конце статьи):
```
*[BBC]: British Broadcasting Corporation
```
* Сноски оформляются так:
```
Lorem ipsum[^1] dolor sit amet, consectetur adipisicing elit
[^1]: [Lorem ipsum]([http://ru.wikipedia.org/wiki/Lorem_ipsum](http://ru.wikipedia.org/wiki/Lorem_ipsum)) — название классического текста-«рыбы».
```
Это же касается и сносок, которые делает Рэндалл. Между подряд идущими сносками ставится тонкий пробел — «&thinsp;».

* Текст типа [citation needed] делается с использованием тега sup: <sup>[citation needed]</sup>
* Формулы оборачиваются в `$F_x$` (внутристрочные) или в `$$F_x$$` (на отдельной строке).
* Вопрос оформляется так, обратите внимание на пробелы после `>`:
```
> Что, если я соберусь поплавать в бассейне для отработанного ядерного топлива? Нужно ли мне нырять, чтобы получить фатальную дозу радиации? Насколько долго я смогу продержаться на поверхности?
> 
> — Джонатан Бастьен-Филиатро
```

## Перевод картинок

1. Для перевода картинок нам нужны две вещи: графический редактор (GIMP) и шрифт.
 a. Графический редактор можно скачать с официального сайта, там в разделе загрузок будет ссылка на http://nightly.darkrefraction.com/gimp/ скачивать нужно Stable (2.8)
 b. Шрифт можно скачать по ссылке https://github.com/theshock/theshock.github.com/blob/9bb56783a34e920f6e290b5b8e0aff9df23a75ba/trash/xkcdRightHand.ttf?raw=true
2. Интерфейс у GIMP не очень простой, но необходимые нам операции — несложные:
 a. Сперва нам нужно удалить текст. Сделать это очень просто, выделяем его и жмём Delete.
 b. Выбираем инструмент «Текст», выбираем шрифт и размер и пишем перевод. Позиционируем его чтобы смотрелось нормально.
 c. Дальше нужно выбрать снова нужный рабочий слой: Ctrl-L и выбираем самый нижний слой. Теперь снова можно выделять кусок картинки и очищать его.

## Конвертация html в markdown

### Установка html2markdown

1. Устанавливаем интерпретатор Python c официального сайта [http://www.python.org/ftp/python/3.3.2/python-3.3.2.msi](http://www.python.org/ftp/python/3.3.2/python-3.3.2.msi)
2. При установке выбираем "Add python.exe to path"
3. Скачиваем [http://i.libc6.org/media/opensource/html2text.py](http://i.libc6.org/media/opensource/html2text.py)
4. Вот этот файл нам и нужен

### Конвертирование

1. Открываем исходный текст последнего what if? (Ctrl+U) и сохраняем в файл всё что между <article></article>
2. Открываем консоль, пишем:
```
python ПУТЬ_К_html2text.py(перетаскиваем файл его в консоль) -b0 ПУТЬ_К_СОХРАНЁННОМУ_HTML > ПУТЬ_К_СОХРАНЁННОМУ_HTML(добавляем расширение .md)
```
3. Открываем файл в текстовом редакторе и удаляем лишнее.

Если при конвертировании будет ругаться на: UnicodeDecodeError: 'utf-8' codec can't decode byte 0x97 in position 218: invalid start byte, значит нужно удалить все unicode символы, обычно это тире всякие, да кавычки. Под Linux такой проблемы просто не возникает, а в Windows система не поддерживает utf-8 нормально, так что Python просто затыкается когда встречает такие символы.

### Альтернативный способ:

1. Установить расширение для Chrome StackEdit [https://chrome.google.com/webstore/detail/stackedit/iiooodelglhkcpgbajoejffhijaclcdg?hl=en-US&utm_source=chrome-ntp-launcher](https://chrome.google.com/webstore/detail/stackedit/iiooodelglhkcpgbajoejffhijaclcdg?hl=en-US&utm_source=chrome-ntp-launcher)
2. В меню Open from — Convert HTML to Markdown и можно вставить текст который хочешь сконвертировать.

## Порядок выкладывания сайта "по новому"

1. Предварительно на компьютере должен быть установлен:
    1. Python 2.7 [https://www.python.org/downloads/](https://www.python.org/downloads/)
    2. Pelican [http://docs.getpelican.com/en/3.3.0/getting_started.html#installing-pelican](http://docs.getpelican.com/en/3.3.0/getting_started.html#installing-pelican)
    3. Fabric [http://www.fabfile.org/installing.html](http://www.fabfile.org/installing.html)
    4. git [http://git-scm.com/downloads](http://git-scm.com/downloads)
    5. rsync (под windows нет)
2. Нужно зарегистрироваться на github.com (сгенерировать ключ и т.д.) и убедиться что вы включены в [https://github.com/whatifrussian](https://github.com/whatifrussian)
3. Передать *публичный* ключ (который id_rsa.pub) librarian, чтобы он добавил в список аккаунтов с которых можно публиковать сайт.
4. Склонировать репозиторий [https://github.com/whatifrussian/website](https://github.com/whatifrussian/website) и перейти в терминале в директорию с репозиторием
5. Сделать в консоли fab build (это позволит убедиться, что всё необходимое (кроме rsync) у вас установлено и всё работает)
6. Добавить новый материал через git (github, или любым другим удобным способом): статью, картинки и пр.
7. Сделать git pull, чтобы забрать изменения
8. fab publish:dev
9. Открыть [http://dev.chtoes.li/](http://dev.chtoes.li/) и убедиться, что всё корректно отображается.
10. fab publish:prod
11. Открыть [http://chtoes.li](http://chtoes.li) и убедиться что всё корректно отображается.
