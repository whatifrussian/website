Title: Отзывчивость сайта и обратная связь
Slug: speedup-and-feedback
Category: Новости проекта
Date: 2016-10-24 22:00
Source: False
Formulas: False
Description: Мы улучшили отзывчивость сайта и добавили новый способ обратной связи с читателями.

Примерно два месяца назад мы сделали ряд улучшений, существенно повлиявших на скорость отображения сайта. Для быстрых соединений скорость открытия страниц улучшилась в два раза: с 700\ мс до 400\ мс, а для *очень* медленных соединений больше чем в три раза: с 35\ секунд до 10. Таких результатов мы достигли благодаря улучшению процедуры сборки сайта и оптимизации работы веб-сервера, а также хаку для ускорения загрузки картинок с элементами оформления. Помимо этого мы устранили ряд проблем с версткой, и теперь страница не «прыгает» в процессе загрузки.

Для тех, кому интересны технические подробности:

* Мы перенесли значительную часть постпроцессинга HTML из клиентского JavaScript\'а в плагины для [Python-Markdown][1]. Это, кстати, позволило загружать JavaScript асинхронно.
* Добавили inline CSS для предзагрузки графических элементов оформления.
* Уменьшили размер загружаемых картинок, создав для каждой палитру с помощью [pngquant][2].
* Добавили минификацию HTML, CSS и JavaScript.
* Включили поддержку HTTP/2.
* Увеличили степень сжатия страниц с помощью gzip и добавили кэширование сжатых страниц.

Идеи не закончились, так что мы планируем и дальше улучшать отзывчивость сайта.

***

У нас появился новый (хорошо забытый старый :)) канал общения и обратной связи: теперь можно сообщить нам об ошибке на сайте не отвлекаясь от чтения. Для этого нужно выделить фрагмент текста, нажать Ctrl+Enter (или появившуюся кнопку, если читаете со смартфона) и отправить нам форму. В результате создается отчет об ошибке в нашем [репозитории][3] на GitHub\'е, где при наличии аккаунта можно подписаться на обновления статуса или дополнить отчет дополнительной информацией. Большое спасибо проекту [Orphus][4] за идею!

Из технических подробностей можно отметить следующие:

* Клиентская часть написана на чистом JavaScript.
* Поддерживаются все современные браузеры, включая мобильные; не поддерживаются\ — IE 8 и ниже[^1].
* [Серверная часть][5] написана на [Flask][6], для деплоя используется [Fabric3][7].
* Серверная часть отправляет запросы на GitHub через [Integrations API][8].

[^1]: Во имя сохранения рассудка разработчика.

Наш код мы публикуем как [общественное достояние][9], и (возможно, после небольшой адаптации) его можно переиспользовать в любом другом проекте. Мы не накладываем дополнительных условий, но если вам пригодятся эти наработки, то мы были бы рады обратной ссылке и вашим отзывам.

[1]: https://pythonhosted.org/Markdown/ "Python Markdown"
[2]: https://pngquant.org/ "pngquant — lossy PNG compressor"
[3]: https://github.com/whatifrussian/website "whatifrussian/website: Repository of website https://chtoes.li"
[4]: https://orphus.ru "Orphus system"
[5]: https://github.com/whatifrussian/api "whatifrussian/api: Simple flask application for chtoes.li API"
[6]: http://flask.pocoo.org "Welcome | Flask (A Python Microframework)"
[7]: https://pypi.python.org/pypi/Fabric3 "Fabric3 1.12.post1 : Python Package Index"
[8]: https://developer.github.com/changes/2016-09-14-Integrations-Early-Access/ "Integrations Early Access | GitHub Developer Guide"
[9]: https://github.com/whatifrussian/website/blob/master/LICENSE.md "website/LICENSE.md at master · whatifrussian/website"
