Title: Телефонная клавиатура
Slug: phone-keypad
Category: What If?
Date: 2013-12-12 14:29
Source: http://what-if.xkcd.com/75/
Formulas: True

> У меня один из тех старых телефонов, где текст набираешь цифровыми клавишами: например, чтобы ввести “Y”, трижды нажимаешь девятку. В некоторых словах буквы, соответствующие одной цифре, идут подряд. Когда это происходит, приходится делать паузы между буквами, так что при наборе такие слова весьма раздражают. Какое английское слово содержит наибольшее количество букв с одной клавиши? 
>
 > — Стюарт Бишоп

На этот вопрос можно ответить с помощью следующей головоломной shell-команды, которая одновременно вызывает головную боль и находит в заданном списке все слова, в которых буквы с одной клавиши встречаются несколько раз подряд:

<pre>cat wordlist.txt | perl -pe 's/^(.*)$/\L$& \U$&/g' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' '2223334445556667777888999' | grep -P "(.)\1\1\1\1\1"</pre>

Если верить этому скрипту, победитель — слово “**nonmonogamous**” («немоногамный»), при вводе которого придётся набрать одну за другой семь букв (**nonmono**), «живущих» на клавише «6»[^1].

**Предложения для телефонной клавиатуры**

Редко встретишь слово, _все_ буквы которого соответствуют одной цифре; распространённые слова[^2] с этим свойством не длиннее нескольких букв. И всё же, мы можем составить из них “**a high def MMO on TV**” («MMO в высоком разрешении по телевизору») — фразу, каждое слово которой задействует единственную клавишу.

![Ещё один часок, и всё.](/uploads/075-phone-keypad/t9_mmo_ru.png)
[transcription]
[Парень и Девушка смотрят телевизор.]
Парень: Умоляю, давай посмотрим что угодно, кроме игровых роликов!
Девушка: Чшш.
Подпись: A high-def MMO on TV / ММО в высоком разрешении по телевизору
[/transcription]

Таких фраз сколько угодно, но некоторые из них слегка перегибают палку:

![Раскошеливайся!](/uploads/075-phone-keypad/t9_mom_ru.png)
[transcription]
[Человек, передающий другому человеку мешок с едой для полёта на Луну, где ждёт Мать.]
Мать: Сынок?
Человек принимающий: $?
Надпись на мешке: Еда
Надпись на табличке: Запуск
Подпись: A high fee 2 feed mom on moon / Покормить маму на Луне не дёшево
[/transcription]

Подобные проблемы с набором текста характерны не только для старых телефонных клавиатур. Для любой системы ввода можно найти фразы, набирать которые неудобно.

**QWERTY-клавиатуры**

Гикам печатного слова хорошо известен тот факт, что “stewardesses” («стюардессы») — это самое длинное слово, которое можно набрать на QWERTY-клавиатуре только левой рукой.

В сущности, не используя правую руку, можно вводить целые предложения. Попробуйте, например, набрать такое: “**We reserved seats at a secret Starcraft fest**” («Мы забронировали места на тайном Starcraft-фестивале»). Неудобно, мм?

Давайте посмотрим ещё несколько предложений (сочинённых при помощи куда более запутанных shell-команд и скриптов на Python[^3]), которые удовлетворяют всевозможным ограничениям:


**Только левая рука**

![Оно того стоило.](/uploads/075-phone-keypad/t9_arrested_ru.png)
[transcription]
[Полицейский, арестовывающий Отца и Детей.]
Подпись: We were arrested after dad ate deer eggs / Нас арестовали после того, как папа съел оленьи яйца
[/transcription]

![ВСТРЕТЬ ХОРЬКА ИЗ СВОЕГО ГОРОДА СЕГОДНЯ!](/uploads/075-phone-keypad/t9_ferret_ru.png)
[transcription]
[Табличка, анонсирующая сношение хорьков.]
Надпись на табличке: Бесплатно! Сегодня!
Подпись: Ferret sex at great rates / Высокоскоростной секс хорьков
[/transcription]

**Только правая рука**

![Да как ты СМЕЕШЬ!](/uploads/075-phone-keypad/t9_honolulu_ru.png)
[transcription]
[Девочка, упрекающая Парня в том, что он посмотрел на Девушку.]
Подпись: You look upon my mom in Honolulu! / Ты смотришь свысока на мою маму в Гонолулу!
[/transcription]

![ОБОЖЕМОЙ, щенячье молоко!](/uploads/075-phone-keypad/t9_milk_ru.png)
[transcription]
[Парень, предлагающий Девушке бутылку молока.]
Парень: Лол
Девушка: Wtf?
Подпись: Buy my puppy milk, lol / Купи щенячьего молока, лол
[/transcription]

**Только средний ряд**

![Он глянул, что на нём записано, и моментально умер.](/uploads/075-phone-keypad/t9_galahad_ru.png)
[transcription]
[Рыцарь с мечом в одной руке и SSD-картой в другой.]
Подпись: Galahad has a flash SSD / У Галахада флэш-SSD
[/transcription]

![Но всё-таки она очень мила!](/uploads/075-phone-keypad/t9_sasha_ru.png)
[transcription]
[Влюблённая парочка.]
Саша: Ух ты, птичка!
Подпись: Sasha has a GF; GF has ADHD / У Саши есть девушка; у девушки — СДВГ
[/transcription]

![Хрустит.](/uploads/075-phone-keypad/t9_salad_ru.png)
[transcription]
[Парень, поедающий салат из стекла.]
Парень: Вкусно, но до оленьих яиц далеко.
Звук хруста: *хрум*
Подпись: Alas, Dad had a glass salad / Увы, папин салат был стеклянным
[/transcription]

**Только верхний ряд**

![А ещё мы принесли молока!](/uploads/075-phone-keypad/t9_puppy_ru.png)
[transcription]
[Парень и Девушка посыпают щенка перцем. Девушка с хвостиком в ужасе.]
Девушка: Это меньшее, что мы можем сделать!
Подпись: We owe it to you to pepper your puppy / Мы вам задолжали поперчить щенка 
[/transcription]

![А хуже всего то, что стишок-то был неплох.](/uploads/075-phone-keypad/t9_poetry_ru.png)
[transcription]
[Парень и Девушка рвут в клочки бумагу с поэзией Взъерошенного парня.]
Взъерошенный парень: Но…
Парень: Всё равно хреновое было.
Подпись: To torture you, we tore up your poetry / Мы порвали твоё стихотворение в качестве пытки
[/transcription]

И наконец, если кто-нибудь спросит, почему вы свернули активность в социальных сетях, вам хватит верхнего ряда, чтобы объяснить:

![…или ретвитить](/uploads/075-phone-keypad/t9_tweet_ru.png)
[transcription]
[Парень красуется перед зеркалом.]
Подпись: Too pretty to tweet / Слишком красив, чтобы твитить
[/transcription]

**От переводчиков**

> Стоп-стоп-стоп, а как же русская раскладка?
> 
> — Все читатели «Что если?»


Если пользоваться русским словарём из состава myspell, то аналогом “**nonmonogamous**” в русском языке будет «**симпомпончик**». Чтобы набрать «**мпомпон**», нужно 7 раз нажать на клавишу «5». Рецепт получения слов пришлось слегка адаптировать для работы с многобайтовыми кодировками и русской телефонной раскладкой:
<pre>cat wordlist.txt | sed -e 's/^\(.*\)$/\L\1 \U\1/' | sed -e 'y/АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ/222233333444455556666777788889999/' | grep -P "(.)\1\1\1\1\1"</pre>

Классический алгоритм, использующий цепи Маркова, выдаёт для русского текста не такие замечательные результаты, как для английского. Перемешав в случайном порядке фрагменты предложений, гораздо проще получить связный английский текст, грамматика русского страдает сильнее. Ещё хуже ситуация становится, если наложить ограничение на встречающиеся буквы. И всё же, слегка модифицировав алгоритм и «скормив» ему Ильфа и Петрова, Толстого и ещё кое-что, а потом разобрав вывод вручную, можно получить интересные результаты.

**Только левая рука**

![Актуально в ноябре.](/uploads/075-phone-keypad/chtoesli_mustache.png)
[transcription]
[Трое усатых мужчин и девушка с усами.]
Мужчина: Тебе… идёт. Нет, правда…
Надпись: Усы, вас мы все сейчас имеем!
[/transcription]

![Два раза!](/uploads/075-phone-keypad/chtoesli_kin_dza_dza.png)
[transcription]
[Пацак и Главарь контрабандистов.]
Пацак: Ку!
Надпись: Пацак, выкупи пачку КЦ!
[/transcription]

**Только средний ряд**

![А я накупил Bitcoin’ов год назад.](/uploads/075-phone-keypad/chtoesli_btc.png)
[transcription]
[Парень, график BTC/USD и Чёрная Шляпа с мешками долларов.]
Чёрная Шляпа: Я всегда прав.
Надпись: А вы правы, продал доллары.
[/transcription]

[^1]: У этого слова ничья с “nonmonotonic” («немонотонный»). Несомненно, оба победителя проигрывают более неочевидным словам, которых не было в моих списках.

[^2]: Такие, как "**tutu**".

[^3]: Я составил эти предложения следующим образом: искал по текстовым логам фрагменты, удовлетворяющие некоторым условиям, а затем соединял их в случайном порядке с помощью _цепей Маркова_. Код, который я использовал, можно посмотреть [здесь](http://xkcd.com/markov.py.txt).
